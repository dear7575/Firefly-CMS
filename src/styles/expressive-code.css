.expressive-code {
    .frame {
        @apply !shadow-none;
    }

    .title {
        font-family: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
}

/* 动态文章代码块样式 - 模拟 expressive-code */
.expressive-code-dynamic {
    @apply my-4 rounded-lg overflow-hidden relative;
    background: #1e1e1e;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.expressive-code-dynamic .header {
    @apply flex items-center justify-between px-4 py-2;
    background: rgba(255, 255, 255, 0.05);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.expressive-code-dynamic .header .title {
    @apply text-xs font-medium uppercase tracking-wider;
    color: rgba(255, 255, 255, 0.6);
    font-family: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.expressive-code-dynamic pre {
    @apply m-0 p-4 overflow-x-auto relative;
    background: transparent !important;
}

.expressive-code-dynamic code {
    @apply text-sm leading-relaxed block;
    font-family: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    background: transparent !important;
}

/* 复制按钮 - 悬停时显示，定位在整个代码块右上角 */
.expressive-code-dynamic .copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    width: 2rem;
    height: 2rem;
    padding: 0.375rem;
    border-radius: 0.375rem;
    background: var(--primary);
    border: none;
    cursor: pointer;
    opacity: 0;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.expressive-code-dynamic:hover .copy-btn,
.expressive-code-dynamic .copy-btn:focus {
    opacity: 1;
}

.expressive-code-dynamic .copy-btn:hover {
    filter: brightness(1.1);
    transform: scale(1.05);
}

.expressive-code-dynamic .copy-btn svg {
    width: 1rem;
    height: 1rem;
    fill: #fff;
    flex-shrink: 0;
}

.expressive-code-dynamic .copy-btn svg path {
    fill: inherit;
}

/* 图标容器 - 与静态页面一致 */
.expressive-code-dynamic .copy-btn-icon-wrapper {
    position: relative;
    width: 1rem;
    height: 1rem;
}

.expressive-code-dynamic .copy-btn .copy-btn-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 1rem;
    height: 1rem;
    fill: #fff;
    pointer-events: none;
    transition: opacity 0.15s ease;
}

/* 默认状态：显示复制图标，隐藏成功图标 */
.expressive-code-dynamic .copy-btn .copy-icon {
    opacity: 1;
}

.expressive-code-dynamic .copy-btn .success-icon {
    opacity: 0;
}

/* 复制成功状态 */
.expressive-code-dynamic .copy-btn.success .copy-icon {
    opacity: 0;
}

.expressive-code-dynamic .copy-btn.success .success-icon {
    opacity: 1;
}

/* highlight.js 暗色主题 - VS Code Dark+ 风格 */
.expressive-code-dynamic .hljs {
    color: #d4d4d4;
}

/* 关键字 - 蓝色 */
.expressive-code-dynamic .hljs-keyword,
.expressive-code-dynamic .hljs-selector-tag,
.expressive-code-dynamic .hljs-section,
.expressive-code-dynamic .hljs-doctag,
.expressive-code-dynamic .hljs-name,
.expressive-code-dynamic .hljs-strong {
    color: #569cd6;
    font-weight: normal;
}

/* 标题/函数名 - 黄色 */
.expressive-code-dynamic .hljs-title,
.expressive-code-dynamic .hljs-title.function_,
.expressive-code-dynamic .hljs-function {
    color: #dcdcaa;
}

/* 字符串 - 橙色 */
.expressive-code-dynamic .hljs-string,
.expressive-code-dynamic .hljs-symbol,
.expressive-code-dynamic .hljs-bullet,
.expressive-code-dynamic .hljs-addition,
.expressive-code-dynamic .hljs-template-variable,
.expressive-code-dynamic .hljs-template-tag {
    color: #ce9178;
}

/* 属性名/键 - 浅蓝色 (YAML, JSON 等) */
.expressive-code-dynamic .hljs-attr,
.expressive-code-dynamic .hljs-attribute {
    color: #9cdcfe;
}

/* 注释 - 绿色 */
.expressive-code-dynamic .hljs-comment,
.expressive-code-dynamic .hljs-quote,
.expressive-code-dynamic .hljs-deletion,
.expressive-code-dynamic .hljs-meta {
    color: #6a9955;
    font-style: italic;
}

/* 数字/字面量 - 浅绿色 */
.expressive-code-dynamic .hljs-number,
.expressive-code-dynamic .hljs-literal {
    color: #b5cea8;
}

/* 类型 - 青色 */
.expressive-code-dynamic .hljs-type,
.expressive-code-dynamic .hljs-built_in,
.expressive-code-dynamic .hljs-class .hljs-title {
    color: #4ec9b0;
}

/* 变量 - 浅蓝色 */
.expressive-code-dynamic .hljs-variable,
.expressive-code-dynamic .hljs-params {
    color: #9cdcfe;
}

/* 正则 - 红色 */
.expressive-code-dynamic .hljs-regexp {
    color: #d16969;
}

/* 链接 */
.expressive-code-dynamic .hljs-link {
    color: #3794ff;
    text-decoration: underline;
}

/* 标签属性值 */
.expressive-code-dynamic .hljs-selector-class,
.expressive-code-dynamic .hljs-selector-id {
    color: #d7ba7d;
}

/* ============ 亮色模式 ============ */
:root:not(.dark) .expressive-code-dynamic {
    background: #f6f8fa;
    border-color: rgba(0, 0, 0, 0.1);
}

:root:not(.dark) .expressive-code-dynamic .header {
    background: rgba(0, 0, 0, 0.03);
    border-bottom-color: rgba(0, 0, 0, 0.1);
}

:root:not(.dark) .expressive-code-dynamic .header .title {
    color: rgba(0, 0, 0, 0.5);
}

/* 亮色主题 - GitHub 风格 */
:root:not(.dark) .expressive-code-dynamic .hljs {
    color: #24292e;
}

:root:not(.dark) .expressive-code-dynamic .hljs-keyword,
:root:not(.dark) .expressive-code-dynamic .hljs-selector-tag,
:root:not(.dark) .expressive-code-dynamic .hljs-section,
:root:not(.dark) .expressive-code-dynamic .hljs-doctag,
:root:not(.dark) .expressive-code-dynamic .hljs-name,
:root:not(.dark) .expressive-code-dynamic .hljs-strong {
    color: #d73a49;
}

:root:not(.dark) .expressive-code-dynamic .hljs-title,
:root:not(.dark) .expressive-code-dynamic .hljs-title.function_,
:root:not(.dark) .expressive-code-dynamic .hljs-function {
    color: #6f42c1;
}

:root:not(.dark) .expressive-code-dynamic .hljs-string,
:root:not(.dark) .expressive-code-dynamic .hljs-symbol,
:root:not(.dark) .expressive-code-dynamic .hljs-bullet,
:root:not(.dark) .expressive-code-dynamic .hljs-addition,
:root:not(.dark) .expressive-code-dynamic .hljs-template-variable,
:root:not(.dark) .expressive-code-dynamic .hljs-template-tag {
    color: #032f62;
}

:root:not(.dark) .expressive-code-dynamic .hljs-attr,
:root:not(.dark) .expressive-code-dynamic .hljs-attribute {
    color: #005cc5;
}

:root:not(.dark) .expressive-code-dynamic .hljs-comment,
:root:not(.dark) .expressive-code-dynamic .hljs-quote,
:root:not(.dark) .expressive-code-dynamic .hljs-deletion,
:root:not(.dark) .expressive-code-dynamic .hljs-meta {
    color: #6a737d;
    font-style: italic;
}

:root:not(.dark) .expressive-code-dynamic .hljs-number,
:root:not(.dark) .expressive-code-dynamic .hljs-literal {
    color: #005cc5;
}

:root:not(.dark) .expressive-code-dynamic .hljs-type,
:root:not(.dark) .expressive-code-dynamic .hljs-built_in,
:root:not(.dark) .expressive-code-dynamic .hljs-class .hljs-title {
    color: #22863a;
}

:root:not(.dark) .expressive-code-dynamic .hljs-variable,
:root:not(.dark) .expressive-code-dynamic .hljs-params {
    color: #e36209;
}

:root:not(.dark) .expressive-code-dynamic .hljs-regexp {
    color: #032f62;
}

:root:not(.dark) .expressive-code-dynamic .hljs-link {
    color: #0366d6;
}

:root:not(.dark) .expressive-code-dynamic .hljs-selector-class,
:root:not(.dark) .expressive-code-dynamic .hljs-selector-id {
    color: #6f42c1;
}
